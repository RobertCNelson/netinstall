#!/bin/bash
#http://git.kernel.org/?p=linux/kernel/git/torvalds/linux.git;a=tree;f=arch/arm/boot/dts;hb=refs/tags/v3.8-rc5
#        --dtb am335x-bone-serial (BeagleBone (v3.8.x) Serial Install)

#Bootloader:
conf_board="BEAGLEBONE"
conf_bl_http="http://rcn-ee.net/deb/tools/latest"
conf_bl_listfile="bootloader-ng"

#Bootloader Partition:
bootloader_location="fatfs_boot"
boot_partition_size="100"
spl_name="MLO"
boot_name="u-boot.img"

#Bootloader: u-boot features:
#CONFIG_CMD_BOOTZ
#bootz & zImage
conf_uboot_CONFIG_CMD_BOOTZ=1

#Bootloader: u-boot settings
boot_script="uEnv.txt"
boot_fstype="fat"
uboot_SCRIPT_ENTRY="uenvcmd"
uboot_CMD_LOAD="load"
uboot_USE_MMC_DEFINES=1
uboot_fdt_auto_detection=1

#if: define CONFIG_SUPPORT_RAW_INITRD
#conf_normal_initrd_file=initrd.img
#conf_net_initrd_file=initrd.net
##otherwise:
conf_normal_initrd_file=uInitrd
conf_net_initrd_file=uInitrd.net

#Kernel:
#http://rcn-ee.net/deb/wheezy-armhf/LATEST-omap-psp
kernel_subarch="omap-psp"
kernel_repo="TESTING"

usbnet_mem=

#Kernel: Bootloader Settings:
conf_zreladdr="0x80008000"
#u-boot: conf_loadaddr="0x80200000" (locksup)
conf_loadaddr="0x80300000"
conf_fdtaddr="0x815f0000"
#u-boot:rdaddr="0x81000000"
#initrdaddr = 0x80200000 + 10(mb) * 10 0000 = 0x80C0 0000 (10MB)
#u-boot: conf_initrdaddr="0x81000000" (locksup)
conf_initrdaddr="0x81600000"
conf_fdtfile="am335x-bone.dtb"
need_dtbs=1
need_am335x_firmware=1

SERIAL="ttyO0"
SERIAL_CONSOLE="${SERIAL},115200n8"

SERIAL_MODE=1
USE_KMS=1

conf_note="Note: During the install use a 5Volt DC power supply as USB does not always provide enough power. If board locks up on boot run [sudo ifconfig usb0 up] on host."
conf_warning="ONBOARD Ethernet: dhcp ip retrieval is failing, please use external usb-ethernet during initial install till it can be fixed."
